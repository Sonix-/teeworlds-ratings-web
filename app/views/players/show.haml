.ui.basic.segment
  = image_tag @player.avatar.url(:medium), class: 'ui small right floated circular image'

  %h2
    = @player.name
    - if @player.country
      = content_tag(:i, '', class: "#{@player.country.downcase} flag")

  - unless @player.about.nil?
    %h4 About #{@player.name}
    .ui.basic.segment
      = @player.about

  - if user_signed_in? && @user.id == current_user.id
    - if @player.clan.nil?
      %p= link_to 'Create a clan', new_clan_path
    .ui.horizontal.list
      .item.content= link_to 'Edit user information', edit_user_registration_path
      .item.content= link_to 'Edit player profile', edit_player_path(@player.name)

  .ui.relaxed.list
    %b.item
      = link_to @player.clan.name, clan_path(@player.clan.name) unless @player.clan.nil?
    .item
      %b Lvl.
      .ui.circular.blue.basic.label
        50
    .item
      %b Position
      Allrounder
    .item
      %b CTF Rating:
      #{@player.ctf_rating}
    .item
      %b DM Rating:
      #{@player.dm_rating}
    - if user_signed_in? && @user.id == current_user.id
      .item
        %b Ingame key:
        %p.ui.blue.label
          #{@player.secret_key}
    .item
      %b Time spent on Ranked servers:
      Time
    .item
      %b Total games:
      #{@player.total_games}
    .item
      %b Total CGs played:
      245
    .item
      %b Registered since:
      11/11/11

%h4 Overall stats

%table.ui.basic.table.games
  %thead
    %tr
      %th K/D
      %th Hammer kills
      %th Gun kills
      %th Shotgun kills
      %th Grenade kills
      %th Rifle kills
      %th Deaths
      %th Suicides
      %th Flag grabs
      %th Flag captures
      %th Flag returns
      %th Flag carrier kills
    %tr
      %td= @player.stats.kd
      %td= @player.stats.hammer_kills
      %td= @player.stats.gun_kills
      %td= @player.stats.shotgun_kills
      %td= @player.stats.grenade_kills
      %td= @player.stats.rifle_kills
      %td= @player.stats.deaths
      %td= @player.stats.suicides
      %td= @player.stats.flag_grabs
      %td= @player.stats.flag_captures
      %td= @player.stats.flag_returns
      %td= @player.stats.flag_carrier_kills

%h4 Latest games

%table.ui.basic.table.games
  %thead
    %tr
      %th ID
      %th Gametype
      %th Map
      %th Length
      %th Result
      %th Date
      %th Rating Change
  - @player.games.each do |game|
    %tr
      %td= link_to game.id, game_path(game.id)
      %td= game.gametype
      %td= game.map
      %td= format_game_length game.time
      %td
        - if game.result == 'Win'
          %p.ui.green.label= game.result
        -else
          %p.ui.red.label= game.result
      %td= game.date
      %td= if game.rating_change > 0 then "+" + game.rating_change.to_s else game.rating_change end
